"use strict";(self.webpackChunkmantis_free_react_admin_template=self.webpackChunkmantis_free_react_admin_template||[]).push([[59],{67059:function(e,r,n){n.r(r),n.d(r,{default:function(){return C}});var i=n(82937),s=n(62463),t=n(42669),a=n(15861),o=n(29439),l=n(64687),d=n.n(l),c=n(47313),m=n(2135),u=n(85554),h=n(30637),p=n(29266),x=n(35553),g=n(48569),j=n(59017),Z=n(18104),w=n(77449),f=n(79433),b=n(73477),v=n(28089),y=n(79429);n.p;n.p;n.p;var S=n(46417),P=n(10688),k=n(31741),E=n(44874),I=function(){var e=(0,u.I0)(),r=(0,c.useState)(!1),n=(0,o.Z)(r,2),t=(n[0],n[1],(0,c.useState)(!1)),l=(0,o.Z)(t,2),I=(l[0],l[1]),_=(0,c.useState)({isError:!1,msg:""}),C=(0,o.Z)(_,2),A=C[0],B=C[1],q=(0,c.useState)(!1),F=(0,o.Z)(q,2),W=F[0],z=F[1],D=function(){z(!W)},J=function(e){e.preventDefault()};return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(y.J9,{initialValues:{email:"",password:"",submit:null},validationSchema:v.Ry().shape({email:v.Z_().email("Must be a valid email").max(255).required("Email is required"),password:v.Z_().max(255).required("Password is required")}),onSubmit:function(){var r=(0,a.Z)(d().mark((function r(n,i){return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:i.setErrors,i.setStatus,i.setSubmitting;try{I(!0),B({isError:!1,msg:""}),fetch("/admin-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n.email,pass:n.password})}).then((function(e){return e.ok||B({isError:!0,msg:"An unknown error occured!"}),e.json()})).then((function(r){if(r.msg)return B({isError:!0,msg:r.msg}),I(!1);localStorage.setItem("token",r.token),localStorage.setItem("adminId",r.adminId),localStorage.setItem("name",r.name),e(h.Y.setAuth({adminId:r.adminId,name:r.name,token:r.token})),I(!1)})).catch((function(e){console.log(e),B({isError:!0,msg:"An error occured while trying to connect to server!"}),I(!1)}))}catch(s){I(!1)}case 2:case"end":return r.stop()}}),r)})));return function(e,n){return r.apply(this,arguments)}}(),children:function(e){var r=e.errors,n=e.handleBlur,t=e.handleChange,a=e.handleSubmit,o=e.isSubmitting,l=e.touched,d=e.values;return(0,S.jsx)("form",{noValidate:!0,onSubmit:a,children:(0,S.jsxs)(i.ZP,{container:!0,spacing:3,children:[(0,S.jsx)(i.ZP,{item:!0,xs:12,children:(0,S.jsxs)(s.Z,{spacing:1,children:[(0,S.jsx)(p.Z,{htmlFor:"email-login",children:"Email Address"}),(0,S.jsx)(x.Z,{id:"email-login",type:"email",value:d.email,name:"email",onBlur:n,onChange:t,placeholder:"Enter email address",fullWidth:!0,error:Boolean(l.email&&r.email)}),l.email&&r.email&&(0,S.jsx)(g.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:r.email})]})}),(0,S.jsx)(i.ZP,{item:!0,xs:12,children:(0,S.jsxs)(s.Z,{spacing:1,children:[(0,S.jsx)(p.Z,{htmlFor:"password-login",children:"Password"}),(0,S.jsx)(x.Z,{fullWidth:!0,error:Boolean(l.password&&r.password),id:"-password-login",type:W?"text":"password",value:d.password,name:"password",onBlur:n,onChange:t,endAdornment:(0,S.jsx)(j.Z,{position:"end",children:(0,S.jsx)(Z.Z,{"aria-label":"toggle password visibility",onClick:D,onMouseDown:J,edge:"end",size:"large",children:W?(0,S.jsx)(k.Z,{}):(0,S.jsx)(E.Z,{})})}),placeholder:"Enter password"}),l.password&&r.password&&(0,S.jsx)(g.Z,{error:!0,id:"standard-weight-helper-text-password-login",children:r.password})]})}),(0,S.jsx)(i.ZP,{item:!0,xs:12,sx:{mt:-1},children:(0,S.jsx)(s.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:(0,S.jsx)(w.Z,{variant:"h6",component:m.rU,to:"/auth/recover",color:"text.primary",children:"Forgot Password?"})})}),r.submit&&(0,S.jsx)(i.ZP,{item:!0,xs:12,children:(0,S.jsx)(g.Z,{error:!0,children:r.submit})}),A.isError&&(0,S.jsx)(i.ZP,{item:!0,xs:12,children:(0,S.jsx)(f.Z,{severity:"error",children:A.msg})}),(0,S.jsx)(i.ZP,{item:!0,xs:12,children:(0,S.jsx)(P.Z,{children:(0,S.jsx)(b.Z,{disableElevation:!0,disabled:o,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Login"})})})]})})}})})},_=n(24809),C=function(){return(0,S.jsx)(_.Z,{children:(0,S.jsxs)(i.ZP,{container:!0,spacing:3,children:[(0,S.jsx)(i.ZP,{item:!0,xs:12,children:(0,S.jsx)(s.Z,{direction:"row",justifyContent:"space-between",alignItems:"baseline",sx:{mb:{xs:-.5,sm:.5}},children:(0,S.jsx)(t.Z,{variant:"h3",children:"Login"})})}),(0,S.jsx)(i.ZP,{item:!0,xs:12,children:(0,S.jsx)(I,{})})]})})}}}]);